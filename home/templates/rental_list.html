{% extends 'base.html' %}
{% block title %}All Rentals{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">All Rentals</h2>
  <a href="{% url 'add_rental_page' %}" class="btn btn-primary mb-3">+ Add New Rental</a>

  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th>Vehicle</th>
        <th>Customer</th>
        <th>Contact</th>
        <th>Start</th>
        <th>End</th>
        <th>Days</th>
        <th>Total Price (₹)</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rentals %}
      <tr>
        <td>
          {% if r.product.image %}
            <img src="{{ r.product.image.url }}" alt="{{ r.product.name }}" width="70" height="50" class="rounded me-2">
          {% endif %}
          {{ r.product.name }}
        </td>
        <td>{{ r.renter_name }}</td>
        <td>{{ r.renter_contact }}</td>
        <td>{{ r.start_date }}</td>
        <td>{{ r.end_date }}</td>
        <td>{{ r.duration }}</td>
        <td>₹{{ r.total_price }}</td>
        <td>
          {% if r.status == 'Active' %}
            <span class="badge bg-success">Active</span>
          {% else %}
            <span class="badge bg-secondary">Completed</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'edit_rental' r.id %}" class="btn btn-sm btn-warning">Edit</a>
          <a href="{% url 'delete_rental' r.id %}" class="btn btn-sm btn-danger"
             onclick="return confirm('Are you sure you want to delete this rental?');">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="9" class="text-center text-muted">No rentals found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
